<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Fastlane::Actions::IncrementBuildNumberAction - fastlane-2.116.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../Action.html">Fastlane::Action</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-author">::author</a>
    
    <li ><a href="#method-c-available_options">::available_options</a>
    
    <li ><a href="#method-c-category">::category</a>
    
    <li ><a href="#method-c-description">::description</a>
    
    <li ><a href="#method-c-example_code">::example_code</a>
    
    <li ><a href="#method-c-is_supported-3F">::is_supported?</a>
    
    <li ><a href="#method-c-output">::output</a>
    
    <li ><a href="#method-c-return_type">::return_type</a>
    
    <li ><a href="#method-c-return_value">::return_value</a>
    
    <li ><a href="#method-c-run">::run</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Fastlane::Actions::IncrementBuildNumberAction">
  <h1 id="class-Fastlane::Actions::IncrementBuildNumberAction" class="class">
    class Fastlane::Actions::IncrementBuildNumberAction
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-author" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">author</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="author-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/increment_build_number.rb, line 93</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">author</span>
  <span class="ruby-string">&quot;KrauseFx&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-available_options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">available_options</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="available_options-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/increment_build_number.rb, line 61</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">available_options</span>
  [
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:build_number</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_BUILD_NUMBER_BUILD_NUMBER&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Change to a specific version&quot;</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,
                                 <span class="ruby-identifier">is_string</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:xcodeproj</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_BUILD_NUMBER_PROJECT&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;optional, you must specify the path to your main Xcode project if it is not in the project root directory&quot;</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,
                                 <span class="ruby-identifier">verify_block</span><span class="ruby-operator">:</span> <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
                                   <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;Please pass the path to the project, not the workspace&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot;.xcworkspace&quot;</span>)
                                   <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;Could not find Xcode project&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">Helper</span>.<span class="ruby-identifier">test?</span>
                                 <span class="ruby-keyword">end</span>)
  ]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-category" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">category</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="category-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/increment_build_number.rb, line 111</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">category</span>
  <span class="ruby-value">:project</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-description" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">description</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="description-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/increment_build_number.rb, line 57</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">description</span>
  <span class="ruby-string">&quot;Increment the build number of your project&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-example_code" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">example_code</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="example_code-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/increment_build_number.rb, line 97</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">example_code</span>
  [
    <span class="ruby-string">&#39;increment_build_number # automatically increment by one&#39;</span>,
    <span class="ruby-string">&#39;increment_build_number(
      build_number: &quot;75&quot; # set a specific number
    )&#39;</span>,
    <span class="ruby-string">&#39;increment_build_number(
      build_number: 75, # specify specific build number (optional, omitting it increments by one)
      xcodeproj: &quot;./path/to/MyApp.xcodeproj&quot; # (optional, you must specify the path to your main Xcode project if it is not in the project root directory)
    )&#39;</span>,
    <span class="ruby-string">&#39;build_number = increment_build_number&#39;</span>
  ]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-is_supported-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_supported?</span><span
            class="method-args">(platform)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="is_supported-3F-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/increment_build_number.rb, line 10</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">is_supported?</span>(<span class="ruby-identifier">platform</span>)
  [<span class="ruby-value">:ios</span>, <span class="ruby-value">:mac</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">platform</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-output" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">output</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="output-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/increment_build_number.rb, line 79</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">output</span>
  [
    [<span class="ruby-string">&#39;BUILD_NUMBER&#39;</span>, <span class="ruby-string">&#39;The new build number&#39;</span>]
  ]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-return_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">return_type</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="return_type-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/increment_build_number.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">return_type</span>
  <span class="ruby-value">:string</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-return_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">return_value</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="return_value-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/increment_build_number.rb, line 85</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">return_value</span>
  <span class="ruby-string">&quot;The new build number&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-run" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run</span><span
            class="method-args">(params)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="run-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/increment_build_number.rb, line 14</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">folder</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:xcodeproj</span>] <span class="ruby-operator">?</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:xcodeproj</span>], <span class="ruby-string">&#39;..&#39;</span>) <span class="ruby-operator">:</span> <span class="ruby-string">&#39;.&#39;</span>

  <span class="ruby-identifier">command_prefix</span> = [
    <span class="ruby-string">&#39;cd&#39;</span>,
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">folder</span>).<span class="ruby-identifier">shellescape</span>,
    <span class="ruby-string">&#39;&amp;&amp;&#39;</span>
  ].<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)

  <span class="ruby-identifier">command_suffix</span> = [
    <span class="ruby-string">&#39;&amp;&amp;&#39;</span>,
    <span class="ruby-string">&#39;cd&#39;</span>,
    <span class="ruby-string">&#39;-&#39;</span>
  ].<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)

  <span class="ruby-comment"># More information about how to set up your project and how it works:</span>
  <span class="ruby-comment"># https://developer.apple.com/library/ios/qa/qa1827/_index.html</span>
  <span class="ruby-comment"># Attention: This is NOT the version number - but the build number</span>

  <span class="ruby-identifier">agv_enabled</span> = <span class="ruby-identifier">system</span>([<span class="ruby-identifier">command_prefix</span>, <span class="ruby-string">&#39;agvtool what-version&#39;</span>, <span class="ruby-identifier">command_suffix</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>))
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Apple Generic Versioning is not enabled.&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">agv_enabled</span>

  <span class="ruby-identifier">command</span> = [
    <span class="ruby-identifier">command_prefix</span>,
    <span class="ruby-string">&#39;agvtool&#39;</span>,
    <span class="ruby-identifier">params</span>[<span class="ruby-value">:build_number</span>] <span class="ruby-operator">?</span> <span class="ruby-node">&quot;new-version -all #{params[:build_number].to_s.strip}&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;next-version -all&#39;</span>,
    <span class="ruby-identifier">command_suffix</span>
  ].<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)

  <span class="ruby-identifier">output</span> = <span class="ruby-constant">Actions</span>.<span class="ruby-identifier">sh</span>(<span class="ruby-identifier">command</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">output</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;$(SRCROOT)&#39;</span>)
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">error</span>(<span class="ruby-string">&#39;Cannot set build number with plist path containing $(SRCROOT)&#39;</span>)
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">error</span>(<span class="ruby-string">&#39;Please remove $(SRCROOT) in your Xcode target build settings&#39;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Store the new number in the shared hash</span>
  <span class="ruby-identifier">build_number</span> = <span class="ruby-constant">Actions</span>.<span class="ruby-identifier">sh</span>(<span class="ruby-node">&quot;#{command_prefix} agvtool what-version&quot;</span>, <span class="ruby-identifier">log</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>).<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>).<span class="ruby-identifier">last</span>.<span class="ruby-identifier">strip</span>

  <span class="ruby-keyword">return</span> <span class="ruby-constant">Actions</span>.<span class="ruby-identifier">lane_context</span>[<span class="ruby-constant">SharedValues</span><span class="ruby-operator">::</span><span class="ruby-constant">BUILD_NUMBER</span>] = <span class="ruby-identifier">build_number</span>
<span class="ruby-keyword">rescue</span>
  <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;Apple Generic Versioning is not enabled in this project.\nBefore being able to increment and read the version number from your Xcode project, you first need to setup your project properly. Please follow the guide at https://developer.apple.com/library/content/qa/qa1827/_index.html&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

