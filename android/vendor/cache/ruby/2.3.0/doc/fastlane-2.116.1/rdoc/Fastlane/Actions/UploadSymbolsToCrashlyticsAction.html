<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Fastlane::Actions::UploadSymbolsToCrashlyticsAction - fastlane-2.116.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../Action.html">Fastlane::Action</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-authors">::authors</a>
    
    <li ><a href="#method-c-available_options">::available_options</a>
    
    <li ><a href="#method-c-category">::category</a>
    
    <li ><a href="#method-c-description">::description</a>
    
    <li ><a href="#method-c-details">::details</a>
    
    <li ><a href="#method-c-example_code">::example_code</a>
    
    <li ><a href="#method-c-execute_uploads">::execute_uploads</a>
    
    <li ><a href="#method-c-find_api_token">::find_api_token</a>
    
    <li ><a href="#method-c-find_binary_path">::find_binary_path</a>
    
    <li ><a href="#method-c-find_gsp_path">::find_gsp_path</a>
    
    <li ><a href="#method-c-handle_dsym">::handle_dsym</a>
    
    <li ><a href="#method-c-is_supported-3F">::is_supported?</a>
    
    <li ><a href="#method-c-output">::output</a>
    
    <li ><a href="#method-c-return_value">::return_value</a>
    
    <li ><a href="#method-c-run">::run</a>
    
    <li ><a href="#method-c-upload_dsym">::upload_dsym</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Fastlane::Actions::UploadSymbolsToCrashlyticsAction">
  <h1 id="class-Fastlane::Actions::UploadSymbolsToCrashlyticsAction" class="class">
    class Fastlane::Actions::UploadSymbolsToCrashlyticsAction
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-authors" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">authors</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="authors-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 221</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">authors</span>
  [<span class="ruby-string">&quot;KrauseFx&quot;</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-available_options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">available_options</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="available_options-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 145</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">available_options</span>
  [
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:dsym_path</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_UPLOAD_SYMBOLS_TO_CRASHLYTICS_DSYM_PATH&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Path to the DSYM file or zip to upload&quot;</span>,
                                 <span class="ruby-identifier">default_value</span><span class="ruby-operator">:</span> <span class="ruby-constant">ENV</span>[<span class="ruby-constant">SharedValues</span><span class="ruby-operator">::</span><span class="ruby-constant">DSYM_OUTPUT_PATH</span>.<span class="ruby-identifier">to_s</span>] <span class="ruby-operator">||</span> (<span class="ruby-constant">Dir</span>[<span class="ruby-string">&quot;./**/*.dSYM&quot;</span>] <span class="ruby-operator">+</span> <span class="ruby-constant">Dir</span>[<span class="ruby-string">&quot;./**/*.dSYM.zip&quot;</span>]).<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">f</span>) }.<span class="ruby-identifier">last</span>,
                                 <span class="ruby-identifier">default_value_dynamic</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,
                                 <span class="ruby-identifier">verify_block</span><span class="ruby-operator">:</span> <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
                                   <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Couldn&#39;t find file at path &#39;#{File.expand_path(value)}&#39;&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">value</span>)
                                   <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;Symbolication file needs to be dSYM or zip&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot;.zip&quot;</span>, <span class="ruby-string">&quot;.dSYM&quot;</span>)
                                 <span class="ruby-keyword">end</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:dsym_paths</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_UPLOAD_SYMBOLS_TO_CRASHLYTICS_DSYM_PATHS&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Paths to the DSYM files or zips to upload&quot;</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,
                                 <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> <span class="ruby-constant">Array</span>,
                                 <span class="ruby-identifier">verify_block</span><span class="ruby-operator">:</span> <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">values</span><span class="ruby-operator">|</span>
                                   <span class="ruby-identifier">values</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
                                     <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Couldn&#39;t find file at path &#39;#{File.expand_path(value)}&#39;&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">value</span>)
                                     <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;Symbolication file needs to be dSYM or zip&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot;.zip&quot;</span>, <span class="ruby-string">&quot;.dSYM&quot;</span>)
                                   <span class="ruby-keyword">end</span>
                                 <span class="ruby-keyword">end</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:api_token</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;CRASHLYTICS_API_TOKEN&quot;</span>,
                                 <span class="ruby-identifier">sensitive</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Crashlytics API Key&quot;</span>,
                                 <span class="ruby-identifier">verify_block</span><span class="ruby-operator">:</span> <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
                                   <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;No API token for Crashlytics given, pass using `api_token: &#39;token&#39;`&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
                                 <span class="ruby-keyword">end</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:gsp_path</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;GOOGLE_SERVICES_INFO_PLIST_PATH&quot;</span>,
                                 <span class="ruby-identifier">code_gen_sensitive</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Path to GoogleService-Info.plist&quot;</span>,
                                 <span class="ruby-identifier">verify_block</span><span class="ruby-operator">:</span> <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
                                   <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Couldn&#39;t find file at path &#39;#{File.expand_path(value)}&#39;&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">value</span>)
                                   <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;No Path to GoogleService-Info.plist for Firebase Crashlytics given, pass using `gsp_path: &#39;path&#39;`&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
                                 <span class="ruby-keyword">end</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:binary_path</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_UPLOAD_SYMBOLS_TO_CRASHLYTICS_BINARY_PATH&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;The path to the upload-symbols file of the Fabric app&quot;</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,
                                 <span class="ruby-identifier">verify_block</span><span class="ruby-operator">:</span> <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
                                   <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Couldn&#39;t find file at path &#39;#{value}&#39;&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">value</span>)
                                 <span class="ruby-keyword">end</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:platform</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_UPLOAD_SYMBOLS_TO_CRASHLYTICS_PLATFORM&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;The platform of the app (ios, appletvos, mac)&quot;</span>,
                                 <span class="ruby-identifier">default_value</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;ios&quot;</span>,
                                 <span class="ruby-identifier">verify_block</span><span class="ruby-operator">:</span> <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
                                   <span class="ruby-identifier">available</span> = [<span class="ruby-string">&#39;ios&#39;</span>, <span class="ruby-string">&#39;appletvos&#39;</span>, <span class="ruby-string">&#39;mac&#39;</span>]
                                   <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Invalid platform &#39;#{value}&#39;, must be #{available.join(&#39;, &#39;)}&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">available</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">value</span>)
                                 <span class="ruby-keyword">end</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:dsym_worker_threads</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_UPLOAD_SYMBOLS_TO_CRASHLYTICS_DSYM_WORKER_THREADS&quot;</span>,
                                 <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> <span class="ruby-constant">Integer</span>,
                                 <span class="ruby-identifier">default_value</span><span class="ruby-operator">:</span> <span class="ruby-value">1</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;The number of threads to use for simultaneous dSYM upload&quot;</span>,
                                 <span class="ruby-identifier">verify_block</span><span class="ruby-operator">:</span> <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
                                   <span class="ruby-identifier">min_threads</span> = <span class="ruby-value">1</span>
                                   <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Too few threads (#{value}) minimum number of threads: #{min_threads}&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">min_threads</span>
                                 <span class="ruby-keyword">end</span>)
  ]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-category" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">category</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="category-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 235</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">category</span>
  <span class="ruby-value">:misc</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-description" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">description</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@!group Documentation</p>
          
          

          
          <div class="method-source-code" id="description-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 137</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">description</span>
  <span class="ruby-string">&quot;Upload dSYM symbolication files to Crashlytics&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-details" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">details</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="details-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 141</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">details</span>
  <span class="ruby-string">&quot;This action allows you to upload symbolication files to Crashlytics. It&#39;s extra useful if you use it to download the latest dSYM files from Apple when you use Bitcode. This action will not fail the build if one of the uploads failed. The reason for that is that sometimes some of dSYM files are invalid, and we don&#39;t want them to fail the complete build.&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-example_code" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">example_code</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="example_code-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 229</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">example_code</span>
  [
    <span class="ruby-string">&#39;upload_symbols_to_crashlytics(dsym_path: &quot;./App.dSYM.zip&quot;)&#39;</span>
  ]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-execute_uploads" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">execute_uploads</span><span
            class="method-args">(params, max_worker_threads, work_q)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="execute_uploads-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 69</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">execute_uploads</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">max_worker_threads</span>, <span class="ruby-identifier">work_q</span>)
  <span class="ruby-identifier">number_of_threads</span> = [<span class="ruby-identifier">max_worker_threads</span>, <span class="ruby-identifier">work_q</span>.<span class="ruby-identifier">size</span>].<span class="ruby-identifier">min</span>
  <span class="ruby-identifier">workers</span> = (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">number_of_threads</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span>
    <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-keyword">while</span> <span class="ruby-identifier">work_q</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
          <span class="ruby-identifier">current_path</span> = <span class="ruby-identifier">work_q</span>.<span class="ruby-identifier">pop</span>(<span class="ruby-keyword">true</span>)
          <span class="ruby-identifier">upload_dsym</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">current_path</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
        <span class="ruby-constant">UI</span>.<span class="ruby-identifier">error</span>(<span class="ruby-identifier">ex</span>.<span class="ruby-identifier">to_s</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">workers</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:join</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-find_api_token" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_api_token</span><span
            class="method-args">(params)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="find_api_token-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 103</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find_api_token</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:api_token</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-constant">Dir</span>[<span class="ruby-string">&quot;./**/Info.plist&quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">current</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-constant">Actions</span><span class="ruby-operator">::</span><span class="ruby-constant">GetInfoPlistValueAction</span>.<span class="ruby-identifier">run</span>(<span class="ruby-identifier">path</span><span class="ruby-operator">:</span> <span class="ruby-identifier">current</span>, <span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Fabric&quot;</span>)
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">result</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Hash</span>)
      <span class="ruby-identifier">params</span>[<span class="ruby-value">:api_token</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">result</span>[<span class="ruby-string">&quot;APIKey&quot;</span>]
      <span class="ruby-constant">UI</span>.<span class="ruby-identifier">verbose</span>(<span class="ruby-node">&quot;found an APIKey in #{current}&quot;</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-find_binary_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_binary_path</span><span
            class="method-args">(params)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="find_binary_path-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 126</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find_binary_path</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">params</span>[<span class="ruby-value">:binary_path</span>] <span class="ruby-operator">||=</span> (<span class="ruby-constant">Dir</span>[<span class="ruby-string">&quot;/Applications/Fabric.app/**/upload-symbols&quot;</span>] <span class="ruby-operator">+</span> <span class="ruby-constant">Dir</span>[<span class="ruby-string">&quot;./Pods/**/upload-symbols&quot;</span>]).<span class="ruby-identifier">last</span>
  <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;Failed to find Fabric&#39;s upload_symbols binary at /Applications/Fabric.app/**/upload-symbols or ./Pods/**/upload-symbols. Please specify the location of the binary explicitly by using the binary_path option&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:binary_path</span>]

  <span class="ruby-identifier">params</span>[<span class="ruby-value">:binary_path</span>] = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:binary_path</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-find_gsp_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find_gsp_path</span><span
            class="method-args">(params)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="find_gsp_path-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 115</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find_gsp_path</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:api_token</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:gsp_path</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">params</span>[<span class="ruby-value">:gsp_path</span>] = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:gsp_path</span>])
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">gsp_path</span> = <span class="ruby-constant">Dir</span>[<span class="ruby-string">&quot;./**/GoogleService-Info.plist&quot;</span>].<span class="ruby-identifier">first</span>
    <span class="ruby-identifier">params</span>[<span class="ruby-value">:gsp_path</span>] = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">gsp_path</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">gsp_path</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-handle_dsym" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">handle_dsym</span><span
            class="method-args">(params, current_path, max_worker_threads)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@param current_path this is a path to either a dSYM or a zipped dSYM</p>

<pre>this might also be either nested or not, we&#39;re flexible</pre>
          
          

          
          <div class="method-source-code" id="handle_dsym-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 47</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">handle_dsym</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">current_path</span>, <span class="ruby-identifier">max_worker_threads</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_path</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot;.dSYM&quot;</span>)
    <span class="ruby-identifier">upload_dsym</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">current_path</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">current_path</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot;.zip&quot;</span>)
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">message</span>(<span class="ruby-node">&quot;Extracting &#39;#{current_path}&#39;...&quot;</span>)

    <span class="ruby-identifier">current_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">current_path</span>)
    <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">mktmpdir</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
      <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">dir</span>) <span class="ruby-keyword">do</span>
        <span class="ruby-constant">Actions</span>.<span class="ruby-identifier">sh</span>(<span class="ruby-node">&quot;unzip -qo #{current_path.shellescape}&quot;</span>)
        <span class="ruby-identifier">work_q</span> = <span class="ruby-constant">Queue</span>.<span class="ruby-identifier">new</span>
        <span class="ruby-constant">Dir</span>[<span class="ruby-string">&quot;*.dSYM&quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sub</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">work_q</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">sub</span>)
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">execute_uploads</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">max_worker_threads</span>, <span class="ruby-identifier">work_q</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">error</span>(<span class="ruby-node">&quot;Don&#39;t know how to handle &#39;#{current_path}&#39;&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-is_supported-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_supported?</span><span
            class="method-args">(platform)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="is_supported-3F-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 225</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">is_supported?</span>(<span class="ruby-identifier">platform</span>)
  [<span class="ruby-value">:ios</span>, <span class="ruby-value">:appletvos</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">platform</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-output" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">output</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="output-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 213</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">output</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-return_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">return_value</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="return_value-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 217</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">return_value</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-run" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run</span><span
            class="method-args">(params)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="run-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 6</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;tmpdir&#39;</span>

  <span class="ruby-identifier">find_binary_path</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">find_api_token</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-identifier">find_gsp_path</span>(<span class="ruby-identifier">params</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">params</span>[<span class="ruby-value">:api_token</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">params</span>[<span class="ruby-value">:gsp_path</span>]
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&#39;Either Fabric API key or path to Firebase Crashlytics GoogleService-Info.plist must be given.&#39;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">dsym_paths</span> = []
  <span class="ruby-identifier">dsym_paths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:dsym_path</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:dsym_path</span>]
  <span class="ruby-identifier">dsym_paths</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">Actions</span>.<span class="ruby-identifier">lane_context</span>[<span class="ruby-constant">SharedValues</span><span class="ruby-operator">::</span><span class="ruby-constant">DSYM_PATHS</span>] <span class="ruby-keyword">if</span> <span class="ruby-constant">Actions</span>.<span class="ruby-identifier">lane_context</span>[<span class="ruby-constant">SharedValues</span><span class="ruby-operator">::</span><span class="ruby-constant">DSYM_PATHS</span>]

  <span class="ruby-comment"># Allows adding of additional multiple dsym_paths since :dsym_path can be autoset by other actions</span>
  <span class="ruby-identifier">dsym_paths</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:dsym_paths</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:dsym_paths</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dsym_paths</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">error</span>(<span class="ruby-string">&quot;Couldn&#39;t find any dSYMs, please pass them using the dsym_path option&quot;</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Get rid of duplicates (which might occur when both passed and detected)</span>
  <span class="ruby-identifier">dsym_paths</span> = <span class="ruby-identifier">dsym_paths</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">a</span>) }
  <span class="ruby-identifier">dsym_paths</span>.<span class="ruby-identifier">uniq!</span>

  <span class="ruby-identifier">max_worker_threads</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:dsym_worker_threads</span>]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">max_worker_threads</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">message</span>(<span class="ruby-node">&quot;Using #{max_worker_threads} threads for Crashlytics dSYM upload 🏎&quot;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">dsym_paths</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">current_path</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">handle_dsym</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">current_path</span>, <span class="ruby-identifier">max_worker_threads</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">UI</span>.<span class="ruby-identifier">success</span>(<span class="ruby-string">&quot;Successfully uploaded dSYM files to Crashlytics 💯&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-upload_dsym" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">upload_dsym</span><span
            class="method-args">(params, path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="upload_dsym-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/upload_symbols_to_crashlytics.rb, line 86</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">upload_dsym</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">path</span>)
  <span class="ruby-constant">UI</span>.<span class="ruby-identifier">message</span>(<span class="ruby-node">&quot;Uploading &#39;#{path}&#39;...&quot;</span>)
  <span class="ruby-identifier">command</span> = []
  <span class="ruby-identifier">command</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:binary_path</span>]).<span class="ruby-identifier">shellescape</span>
  <span class="ruby-identifier">command</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;-a #{params[:api_token]}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:api_token</span>]
  <span class="ruby-identifier">command</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;-gsp #{params[:gsp_path].shellescape}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:gsp_path</span>]
  <span class="ruby-identifier">command</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;-p #{params[:platform] == &#39;appletvos&#39; ? &#39;tvos&#39; : params[:platform]}&quot;</span>
  <span class="ruby-identifier">command</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">shellescape</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">command_to_execute</span> = <span class="ruby-identifier">command</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot; &quot;</span>)
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">verbose</span>(<span class="ruby-node">&quot;upload_dsym using command: #{command_to_execute}&quot;</span>)
    <span class="ruby-constant">Actions</span>.<span class="ruby-identifier">sh</span>(<span class="ruby-identifier">command_to_execute</span>, <span class="ruby-identifier">log</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">error</span>(<span class="ruby-identifier">ex</span>.<span class="ruby-identifier">to_s</span>) <span class="ruby-comment"># it fails, however we don&#39;t want to fail everything just for this</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

