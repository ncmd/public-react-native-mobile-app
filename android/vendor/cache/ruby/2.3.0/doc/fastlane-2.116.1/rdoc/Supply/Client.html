<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Supply::Client - fastlane-2.116.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="AbstractGoogleServiceClient.html">Supply::AbstractGoogleServiceClient</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li class="calls-super" ><a href="#method-c-service_account_authentication">::service_account_authentication</a>
    
    <li ><a href="#method-i-aab_version_codes">#aab_version_codes</a>
    
    <li ><a href="#method-i-abort_current_edit">#abort_current_edit</a>
    
    <li ><a href="#method-i-apk_listings">#apk_listings</a>
    
    <li ><a href="#method-i-apks_version_codes">#apks_version_codes</a>
    
    <li ><a href="#method-i-begin_edit">#begin_edit</a>
    
    <li ><a href="#method-i-clear_screenshots">#clear_screenshots</a>
    
    <li ><a href="#method-i-commit_current_edit-21">#commit_current_edit!</a>
    
    <li ><a href="#method-i-ensure_active_edit-21">#ensure_active_edit!</a>
    
    <li ><a href="#method-i-fetch_images">#fetch_images</a>
    
    <li ><a href="#method-i-listing_for_language">#listing_for_language</a>
    
    <li ><a href="#method-i-listings">#listings</a>
    
    <li ><a href="#method-i-track_version_codes">#track_version_codes</a>
    
    <li ><a href="#method-i-update_apk_listing_for_language">#update_apk_listing_for_language</a>
    
    <li ><a href="#method-i-update_listing_for_language">#update_listing_for_language</a>
    
    <li ><a href="#method-i-update_track">#update_track</a>
    
    <li ><a href="#method-i-upload_apk">#upload_apk</a>
    
    <li ><a href="#method-i-upload_bundle">#upload_bundle</a>
    
    <li ><a href="#method-i-upload_image">#upload_image</a>
    
    <li ><a href="#method-i-upload_mapping">#upload_mapping</a>
    
    <li ><a href="#method-i-upload_obb">#upload_obb</a>
    
    <li ><a href="#method-i-validate_current_edit-21">#validate_current_edit!</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Supply::Client">
  <h1 id="class-Supply::Client" class="class">
    class Supply::Client
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="SCOPE">SCOPE
        
        <dd>
        
      
        <dt id="SERVICE">SERVICE
        
        <dd>
        
      
      </dl>
    </section>
    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-current_edit" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">current_edit</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>Editing something Reference to the entry we&#39;re currently editing. Might
be nil if don&#39;t have one open</p>
        
        </div>
      </div>
      
      <div id="attribute-i-current_package_name" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">current_package_name</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>Package name of the currently edited element</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-service_account_authentication" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">service_account_authentication</span><span
            class="method-args">(params: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@!group Login</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              <a href="AbstractGoogleServiceClient.html#method-c-service_account_authentication">Supply::AbstractGoogleServiceClient.service_account_authentication</a>
            </div>
          

          
          <div class="method-source-code" id="service_account_authentication-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 100</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">service_account_authentication</span>(<span class="ruby-identifier">params</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:json_key</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:json_key_data</span>]
    <span class="ruby-keyword">super</span>(<span class="ruby-identifier">params</span><span class="ruby-operator">:</span> <span class="ruby-identifier">params</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:key</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:issuer</span>]
    <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;google/api_client/auth/key_utils&#39;</span>
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">important</span>(<span class="ruby-string">&quot;This type of authentication is deprecated. Please consider using JSON authentication instead&quot;</span>)
    <span class="ruby-identifier">key</span> = <span class="ruby-constant">Google</span><span class="ruby-operator">::</span><span class="ruby-constant">APIClient</span><span class="ruby-operator">::</span><span class="ruby-constant">KeyUtils</span>.<span class="ruby-identifier">load_from_pkcs12</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:key</span>]), <span class="ruby-string">&#39;notasecret&#39;</span>)
    <span class="ruby-identifier">cred_json</span> = {
      <span class="ruby-identifier">private_key</span><span class="ruby-operator">:</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>,
      <span class="ruby-identifier">client_email</span><span class="ruby-operator">:</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:issuer</span>]
    }
    <span class="ruby-identifier">service_account_json</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">MultiJson</span>.<span class="ruby-identifier">dump</span>(<span class="ruby-identifier">cred_json</span>))
    <span class="ruby-identifier">service_account_json</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;No authentication parameters were specified. These must be provided in order to authenticate with Google&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-aab_version_codes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">aab_version_codes</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Get a list of all AAB version codes - returns the list of version codes</p>
          
          

          
          <div class="method-source-code" id="aab_version_codes-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 202</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">aab_version_codes</span>
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">call_google_api</span> { <span class="ruby-identifier">client</span>.<span class="ruby-identifier">list_edit_bundles</span>(<span class="ruby-identifier">current_package_name</span>, <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>) }

  <span class="ruby-keyword">return</span> <span class="ruby-constant">Array</span>(<span class="ruby-identifier">result</span>.<span class="ruby-identifier">bundles</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:version_code</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-abort_current_edit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">abort_current_edit</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Aborts the current edit deleting all pending changes</p>
          
          

          
          <div class="method-source-code" id="abort_current_edit-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">abort_current_edit</span>
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">call_google_api</span> { <span class="ruby-identifier">client</span>.<span class="ruby-identifier">delete_edit</span>(<span class="ruby-identifier">current_package_name</span>, <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>) }

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">current_edit</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">current_package_name</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-apk_listings" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">apk_listings</span><span
            class="method-args">(apk_version_code)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Get a list of all apk listings (changelogs) - returns the list</p>
          
          

          
          <div class="method-source-code" id="apk_listings-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 211</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">apk_listings</span>(<span class="ruby-identifier">apk_version_code</span>)
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">call_google_api</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">client</span>.<span class="ruby-identifier">list_apk_listings</span>(
      <span class="ruby-identifier">current_package_name</span>,
      <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>,
      <span class="ruby-identifier">apk_version_code</span>
    )
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> (<span class="ruby-identifier">result</span>.<span class="ruby-identifier">listings</span> <span class="ruby-operator">||</span> []).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">ApkListing</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">row</span>.<span class="ruby-identifier">recent_changes</span>, <span class="ruby-identifier">row</span>.<span class="ruby-identifier">language</span>, <span class="ruby-identifier">apk_version_code</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-apks_version_codes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">apks_version_codes</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Get a list of all APK version codes - returns the list of version codes</p>
          
          

          
          <div class="method-source-code" id="apks_version_codes-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 193</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">apks_version_codes</span>
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">call_google_api</span> { <span class="ruby-identifier">client</span>.<span class="ruby-identifier">list_apks</span>(<span class="ruby-identifier">current_package_name</span>, <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>) }

  <span class="ruby-keyword">return</span> <span class="ruby-constant">Array</span>(<span class="ruby-identifier">result</span>.<span class="ruby-identifier">apks</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:version_code</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-begin_edit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">begin_edit</span><span
            class="method-args">(package_name: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Begin modifying a certain package</p>
          
          

          
          <div class="method-source-code" id="begin_edit-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 123</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">begin_edit</span>(<span class="ruby-identifier">package_name</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;You currently have an active edit&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@current_edit</span>

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">current_edit</span> = <span class="ruby-identifier">call_google_api</span> { <span class="ruby-identifier">client</span>.<span class="ruby-identifier">insert_edit</span>(<span class="ruby-identifier">package_name</span>) }

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">current_package_name</span> = <span class="ruby-identifier">package_name</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-clear_screenshots" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">clear_screenshots</span><span
            class="method-args">(image_type: nil, language: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="clear_screenshots-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 395</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear_screenshots</span>(<span class="ruby-identifier">image_type</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">language</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">call_google_api</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">client</span>.<span class="ruby-identifier">delete_all_images</span>(
      <span class="ruby-identifier">current_package_name</span>,
      <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>,
      <span class="ruby-identifier">language</span>,
      <span class="ruby-identifier">image_type</span>
    )
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-commit_current_edit-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">commit_current_edit!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Commits the current edit saving all pending changes on Google Play</p>
          
          

          
          <div class="method-source-code" id="commit_current_edit-21-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">commit_current_edit!</span>
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">call_google_api</span> { <span class="ruby-identifier">client</span>.<span class="ruby-identifier">commit_edit</span>(<span class="ruby-identifier">current_package_name</span>, <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>) }

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">current_edit</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">current_package_name</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-fetch_images" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fetch_images</span><span
            class="method-args">(image_type: nil, language: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@!group Screenshots</p>
          
          

          
          <div class="method-source-code" id="fetch_images-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 364</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fetch_images</span>(<span class="ruby-identifier">image_type</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">language</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">call_google_api</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">client</span>.<span class="ruby-identifier">list_images</span>(
      <span class="ruby-identifier">current_package_name</span>,
      <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>,
      <span class="ruby-identifier">language</span>,
      <span class="ruby-identifier">image_type</span>
    )
  <span class="ruby-keyword">end</span>

  (<span class="ruby-identifier">result</span>.<span class="ruby-identifier">images</span> <span class="ruby-operator">||</span> []).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:url</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-listing_for_language" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">listing_for_language</span><span
            class="method-args">(language)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the listing for the given language filled with the current values
if it already exists</p>
          
          

          
          <div class="method-source-code" id="listing_for_language-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 175</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">listing_for_language</span>(<span class="ruby-identifier">language</span>)
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">client</span>.<span class="ruby-identifier">get_listing</span>(
      <span class="ruby-identifier">current_package_name</span>,
      <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>,
      <span class="ruby-identifier">language</span>
    )

    <span class="ruby-keyword">return</span> <span class="ruby-constant">Listing</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">language</span>, <span class="ruby-identifier">result</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Google</span><span class="ruby-operator">::</span><span class="ruby-constant">Apis</span><span class="ruby-operator">::</span><span class="ruby-constant">ClientError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-keyword">return</span> <span class="ruby-constant">Listing</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">language</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">status_code</span> <span class="ruby-operator">==</span> <span class="ruby-value">404</span> <span class="ruby-comment"># create a new empty listing</span>
    <span class="ruby-identifier">raise</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-listings" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">listings</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Get a list of all languages - returns the list make sure to have an active
edit</p>
          
          

          
          <div class="method-source-code" id="listings-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 164</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">listings</span>
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">call_google_api</span> { <span class="ruby-identifier">client</span>.<span class="ruby-identifier">list_listings</span>(<span class="ruby-identifier">current_package_name</span>, <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>) }

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">listings</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Listing</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">row</span>.<span class="ruby-identifier">language</span>, <span class="ruby-identifier">row</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-track_version_codes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">track_version_codes</span><span
            class="method-args">(track)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Get list of version codes for track</p>
          
          

          
          <div class="method-source-code" id="track_version_codes-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 325</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">track_version_codes</span>(<span class="ruby-identifier">track</span>)
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">client</span>.<span class="ruby-identifier">get_track</span>(
      <span class="ruby-identifier">current_package_name</span>,
      <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>,
      <span class="ruby-identifier">track</span>
    )
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">version_codes</span> <span class="ruby-operator">||</span> []
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Google</span><span class="ruby-operator">::</span><span class="ruby-constant">Apis</span><span class="ruby-operator">::</span><span class="ruby-constant">ClientError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-keyword">return</span> [] <span class="ruby-keyword">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">status_code</span> <span class="ruby-operator">==</span> <span class="ruby-value">404</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;trackEmpty&quot;</span>)
    <span class="ruby-identifier">raise</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-update_apk_listing_for_language" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_apk_listing_for_language</span><span
            class="method-args">(apk_listing)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="update_apk_listing_for_language-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 341</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_apk_listing_for_language</span>(<span class="ruby-identifier">apk_listing</span>)
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">apk_listing_object</span> = <span class="ruby-constant">Androidpublisher</span><span class="ruby-operator">::</span><span class="ruby-constant">ApkListing</span>.<span class="ruby-identifier">new</span>({
    <span class="ruby-identifier">language</span><span class="ruby-operator">:</span> <span class="ruby-identifier">apk_listing</span>.<span class="ruby-identifier">language</span>,
    <span class="ruby-identifier">recent_changes</span><span class="ruby-operator">:</span> <span class="ruby-identifier">apk_listing</span>.<span class="ruby-identifier">recent_changes</span>
  })

  <span class="ruby-identifier">call_google_api</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">client</span>.<span class="ruby-identifier">update_apk_listing</span>(
      <span class="ruby-identifier">current_package_name</span>,
      <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>,
      <span class="ruby-identifier">apk_listing</span>.<span class="ruby-identifier">apk_version_code</span>,
      <span class="ruby-identifier">apk_listing</span>.<span class="ruby-identifier">language</span>,
      <span class="ruby-identifier">apk_listing_object</span>
    )
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-update_listing_for_language" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_listing_for_language</span><span
            class="method-args">(language: nil, title: nil, short_description: nil, full_description: nil, video: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Updates or creates the listing for the specified language</p>
          
          

          
          <div class="method-source-code" id="update_listing_for_language-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 232</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_listing_for_language</span>(<span class="ruby-identifier">language</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">short_description</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">full_description</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">video</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">listing</span> = <span class="ruby-constant">Androidpublisher</span><span class="ruby-operator">::</span><span class="ruby-constant">Listing</span>.<span class="ruby-identifier">new</span>({
    <span class="ruby-identifier">language</span><span class="ruby-operator">:</span> <span class="ruby-identifier">language</span>,
    <span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-identifier">title</span>,
    <span class="ruby-identifier">full_description</span><span class="ruby-operator">:</span> <span class="ruby-identifier">full_description</span>,
    <span class="ruby-identifier">short_description</span><span class="ruby-operator">:</span> <span class="ruby-identifier">short_description</span>,
    <span class="ruby-identifier">video</span><span class="ruby-operator">:</span> <span class="ruby-identifier">video</span>
  })

  <span class="ruby-identifier">call_google_api</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">client</span>.<span class="ruby-identifier">update_listing</span>(
      <span class="ruby-identifier">current_package_name</span>,
      <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>,
      <span class="ruby-identifier">language</span>,
      <span class="ruby-identifier">listing</span>
    )
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-update_track" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_track</span><span
            class="method-args">(track, rollout, apk_version_code)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Updates the track for the provided version code(s)</p>
          
          

          
          <div class="method-source-code" id="update_track-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 298</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_track</span>(<span class="ruby-identifier">track</span>, <span class="ruby-identifier">rollout</span>, <span class="ruby-identifier">apk_version_code</span>)
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">track_version_codes</span> = <span class="ruby-identifier">apk_version_code</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">apk_version_code</span> <span class="ruby-operator">:</span> [<span class="ruby-identifier">apk_version_code</span>]

  <span class="ruby-comment"># This change happend on 2018-04-24</span>
  <span class="ruby-comment"># rollout cannot be sent on any other track besides &quot;rollout&quot;</span>
  <span class="ruby-comment"># https://github.com/fastlane/fastlane/issues/12372</span>
  <span class="ruby-identifier">rollout</span> = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">track</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;rollout&quot;</span>

  <span class="ruby-identifier">track_body</span> = <span class="ruby-constant">Androidpublisher</span><span class="ruby-operator">::</span><span class="ruby-constant">Track</span>.<span class="ruby-identifier">new</span>({
    <span class="ruby-identifier">track</span><span class="ruby-operator">:</span> <span class="ruby-identifier">track</span>,
    <span class="ruby-identifier">user_fraction</span><span class="ruby-operator">:</span> <span class="ruby-identifier">rollout</span>,
    <span class="ruby-identifier">version_codes</span><span class="ruby-operator">:</span> <span class="ruby-identifier">track_version_codes</span>
  })

  <span class="ruby-identifier">call_google_api</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">client</span>.<span class="ruby-identifier">update_track</span>(
      <span class="ruby-identifier">current_package_name</span>,
      <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>,
      <span class="ruby-identifier">track</span>,
      <span class="ruby-identifier">track_body</span>
    )
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-upload_apk" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">upload_apk</span><span
            class="method-args">(path_to_apk)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="upload_apk-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 253</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">upload_apk</span>(<span class="ruby-identifier">path_to_apk</span>)
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">result_upload</span> = <span class="ruby-identifier">call_google_api</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">client</span>.<span class="ruby-identifier">upload_apk</span>(
      <span class="ruby-identifier">current_package_name</span>,
      <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>,
      <span class="ruby-identifier">upload_source</span><span class="ruby-operator">:</span> <span class="ruby-identifier">path_to_apk</span>
    )
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result_upload</span>.<span class="ruby-identifier">version_code</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-upload_bundle" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">upload_bundle</span><span
            class="method-args">(path_to_aab)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="upload_bundle-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 282</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">upload_bundle</span>(<span class="ruby-identifier">path_to_aab</span>)
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">result_upload</span> = <span class="ruby-identifier">call_google_api</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">client</span>.<span class="ruby-identifier">upload_edit_bundle</span>(
      <span class="ruby-identifier">current_package_name</span>,
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>,
      <span class="ruby-identifier">upload_source</span><span class="ruby-operator">:</span> <span class="ruby-identifier">path_to_aab</span>,
      <span class="ruby-identifier">content_type</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;application/octet-stream&quot;</span>
    )
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result_upload</span>.<span class="ruby-identifier">version_code</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-upload_image" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">upload_image</span><span
            class="method-args">(image_path: nil, image_type: nil, language: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@param image_type (e.g. phoneScreenshots, sevenInchScreenshots, …)</p>
          
          

          
          <div class="method-source-code" id="upload_image-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 380</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">upload_image</span>(<span class="ruby-identifier">image_path</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">image_type</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">language</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">call_google_api</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">client</span>.<span class="ruby-identifier">upload_image</span>(
      <span class="ruby-identifier">current_package_name</span>,
      <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>,
      <span class="ruby-identifier">language</span>,
      <span class="ruby-identifier">image_type</span>,
      <span class="ruby-identifier">upload_source</span><span class="ruby-operator">:</span> <span class="ruby-identifier">image_path</span>,
      <span class="ruby-identifier">content_type</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;image/*&#39;</span>
    )
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-upload_mapping" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">upload_mapping</span><span
            class="method-args">(path_to_mapping, apk_version_code)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="upload_mapping-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 267</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">upload_mapping</span>(<span class="ruby-identifier">path_to_mapping</span>, <span class="ruby-identifier">apk_version_code</span>)
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">call_google_api</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">client</span>.<span class="ruby-identifier">upload_edit_deobfuscationfile</span>(
      <span class="ruby-identifier">current_package_name</span>,
      <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>,
      <span class="ruby-identifier">apk_version_code</span>,
      <span class="ruby-string">&quot;proguard&quot;</span>,
      <span class="ruby-identifier">upload_source</span><span class="ruby-operator">:</span> <span class="ruby-identifier">path_to_mapping</span>,
      <span class="ruby-identifier">content_type</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;application/octet-stream&quot;</span>
    )
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-upload_obb" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">upload_obb</span><span
            class="method-args">(obb_file_path: nil, apk_version_code: nil, expansion_file_type: nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="upload_obb-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 408</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">upload_obb</span>(<span class="ruby-identifier">obb_file_path</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">apk_version_code</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">expansion_file_type</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">call_google_api</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">client</span>.<span class="ruby-identifier">upload_expansion_file</span>(
      <span class="ruby-identifier">current_package_name</span>,
      <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>,
      <span class="ruby-identifier">apk_version_code</span>,
      <span class="ruby-identifier">expansion_file_type</span>,
      <span class="ruby-identifier">upload_source</span><span class="ruby-operator">:</span> <span class="ruby-identifier">obb_file_path</span>,
      <span class="ruby-identifier">content_type</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;application/octet-stream&#39;</span>
    )
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-validate_current_edit-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">validate_current_edit!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Validates the current edit - does not change data on Google Play</p>
          
          

          
          <div class="method-source-code" id="validate_current_edit-21-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 142</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validate_current_edit!</span>
  <span class="ruby-identifier">ensure_active_edit!</span>

  <span class="ruby-identifier">call_google_api</span> { <span class="ruby-identifier">client</span>.<span class="ruby-identifier">validate_edit</span>(<span class="ruby-identifier">current_package_name</span>, <span class="ruby-identifier">current_edit</span>.<span class="ruby-identifier">id</span>) }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-ensure_active_edit-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">ensure_active_edit!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="ensure_active_edit-21-source">
            <pre><span class="ruby-comment"># File supply/lib/supply/client.rb, line 425</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ensure_active_edit!</span>
  <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;You need to have an active edit, make sure to call `begin_edit`&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@current_edit</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

