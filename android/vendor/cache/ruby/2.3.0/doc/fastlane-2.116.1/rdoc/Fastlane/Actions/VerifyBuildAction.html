<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Fastlane::Actions::VerifyBuildAction - fastlane-2.116.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../Action.html">Fastlane::Action</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-app_path">::app_path</a>
    
    <li ><a href="#method-c-authors">::authors</a>
    
    <li ><a href="#method-c-available_options">::available_options</a>
    
    <li ><a href="#method-c-category">::category</a>
    
    <li ><a href="#method-c-description">::description</a>
    
    <li ><a href="#method-c-details">::details</a>
    
    <li ><a href="#method-c-evaulate">::evaulate</a>
    
    <li ><a href="#method-c-example_code">::example_code</a>
    
    <li ><a href="#method-c-gather_cert_info">::gather_cert_info</a>
    
    <li ><a href="#method-c-is_supported-3F">::is_supported?</a>
    
    <li ><a href="#method-c-output">::output</a>
    
    <li ><a href="#method-c-print_values">::print_values</a>
    
    <li ><a href="#method-c-return_value">::return_value</a>
    
    <li ><a href="#method-c-run">::run</a>
    
    <li ><a href="#method-c-update_with_profile_info">::update_with_profile_info</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Fastlane::Actions::VerifyBuildAction">
  <h1 id="class-Fastlane::Actions::VerifyBuildAction" class="class">
    class Fastlane::Actions::VerifyBuildAction
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-app_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">app_path</span><span
            class="method-args">(params, dir)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="app_path-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 23</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">app_path</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">dir</span>)
  <span class="ruby-identifier">build_path</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ipa_path</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:build_path</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">Actions</span>.<span class="ruby-identifier">lane_context</span>[<span class="ruby-constant">SharedValues</span><span class="ruby-operator">::</span><span class="ruby-constant">IPA_OUTPUT_PATH</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&#39;&#39;</span>
  <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Unable to find file &#39;#{build_path}&#39;&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">build_path</span>)
  <span class="ruby-identifier">build_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">build_path</span>)

  <span class="ruby-keyword">case</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">extname</span>(<span class="ruby-identifier">build_path</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;.ipa&quot;</span>, <span class="ruby-string">&quot;.zip&quot;</span>
    <span class="ruby-node">%x`unzip #{build_path.shellescape} -d #{dir.shellescape} -x &#39;__MACOSX/*&#39; &#39;*.DS_Store&#39;`</span>
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;Unable to unzip ipa&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$?</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
    <span class="ruby-comment"># Adding extra ** for edge-case ipas where Payload directory is nested.</span>
    <span class="ruby-identifier">app_path</span> = <span class="ruby-constant">Dir</span>[<span class="ruby-node">&quot;#{dir}/**/Payload/*.app&quot;</span>].<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;.xcarchive&quot;</span>
    <span class="ruby-identifier">app_path</span> = <span class="ruby-constant">Dir</span>[<span class="ruby-node">&quot;#{build_path}/Products/Applications/*.app&quot;</span>].<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">app_path</span> = <span class="ruby-identifier">build_path</span> <span class="ruby-comment"># Assume that input is an app file.</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;Unable to find app file&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">app_path</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">app_path</span>)
  <span class="ruby-identifier">app_path</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-authors" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">authors</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="authors-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 180</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">authors</span>
  [<span class="ruby-string">&quot;CodeReaper&quot;</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-available_options" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">available_options</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="available_options-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 131</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">available_options</span>
  [
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:provisioning_type</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_VERIFY_BUILD_PROVISIONING_TYPE&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Required type of provisioning&quot;</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,
                                 <span class="ruby-identifier">verify_block</span><span class="ruby-operator">:</span> <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
                                   <span class="ruby-identifier">av</span> = <span class="ruby-node">%w(distribution development)</span>
                                   <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Unsupported provisioning_type, must be: #{av}&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">av</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">value</span>)
                                 <span class="ruby-keyword">end</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:provisioning_uuid</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_VERIFY_BUILD_PROVISIONING_UUID&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Required UUID of provisioning profile&quot;</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:team_identifier</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_VERIFY_BUILD_TEAM_IDENTIFIER&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Required team identifier&quot;</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:team_name</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_VERIFY_BUILD_TEAM_NAME&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Required team name&quot;</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:app_name</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_VERIFY_BUILD_APP_NAME&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Required app name&quot;</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:bundle_identifier</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_VERIFY_BUILD_BUNDLE_IDENTIFIER&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Required bundle identifier&quot;</span>,
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:ipa_path</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_VERIFY_BUILD_IPA_PATH&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Explicitly set the ipa path&quot;</span>,
                                 <span class="ruby-identifier">conflicting_options</span><span class="ruby-operator">:</span> [<span class="ruby-value">:build_path</span>],
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>),
    <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-value">:build_path</span>,
                                 <span class="ruby-identifier">env_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;FL_VERIFY_BUILD_BUILD_PATH&quot;</span>,
                                 <span class="ruby-identifier">description</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Explicitly set the ipa, app or xcarchive path&quot;</span>,
                                 <span class="ruby-identifier">conflicting_options</span><span class="ruby-operator">:</span> [<span class="ruby-value">:ipa_path</span>],
                                 <span class="ruby-identifier">optional</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>)
  ]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-category" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">category</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="category-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 197</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">category</span>
  <span class="ruby-value">:misc</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-description" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">description</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@!group Documentation</p>
          
          

          
          <div class="method-source-code" id="description-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 123</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">description</span>
  <span class="ruby-string">&quot;Able to verify various settings in ipa file&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-details" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">details</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="details-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 127</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">details</span>
  <span class="ruby-string">&quot;Verifies that the built app was built using the expected build resources. This is relevant for people who build on machines that are used to build apps with different profiles, certificates and/or bundle identifiers to guard against configuration mistakes.&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-evaulate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">evaulate</span><span
            class="method-args">(params, values)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="evaulate-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 96</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">evaulate</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">values</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:provisioning_type</span>]
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Mismatched provisioning_type. Required: &#39;#{params[:provisioning_type]}&#39;&#39;; Found: &#39;#{values[&#39;provisioning_type&#39;]}&#39;&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:provisioning_type</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;provisioning_type&#39;</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:provisioning_uuid</span>]
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Mismatched provisioning_uuid. Required: &#39;#{params[:provisioning_uuid]}&#39;; Found: &#39;#{values[&#39;provisioning_uuid&#39;]}&#39;&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:provisioning_uuid</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;provisioning_uuid&#39;</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:team_identifier</span>]
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Mismatched team_identifier. Required: &#39;#{params[:team_identifier]}&#39;; Found: &#39;#{values[&#39;team_identifier&#39;]}&#39;&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:team_identifier</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;team_identifier&#39;</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:team_name</span>]
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Mismatched team_name. Required: &#39;#{params[:team_name]}&#39;; Found: &#39;values[&#39;team_name&#39;]&#39;&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:team_name</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;team_name&#39;</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:app_name</span>]
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Mismatched app_name. Required: &#39;#{params[:app_name]}&#39;; Found: &#39;#{values[&#39;app_name&#39;]}&#39;&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:app_name</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;app_name&#39;</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:bundle_identifier</span>]
    <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Mismatched bundle_identifier. Required: &#39;#{params[:bundle_identifier]}&#39;; Found: &#39;#{values[&#39;bundle_identifier&#39;]}&#39;&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:bundle_identifier</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;bundle_identifier&#39;</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">UI</span>.<span class="ruby-identifier">success</span>(<span class="ruby-string">&quot;Build is verified, have a üç™.&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-example_code" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">example_code</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="example_code-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 188</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">example_code</span>
  [
    <span class="ruby-string">&#39;verify_build(
      provisioning_type: &quot;distribution&quot;,
      bundle_identifier: &quot;com.example.myapp&quot;
    )&#39;</span>
  ]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-gather_cert_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gather_cert_info</span><span
            class="method-args">(app_path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="gather_cert_info-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 44</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">gather_cert_info</span>(<span class="ruby-identifier">app_path</span>)
  <span class="ruby-identifier">cert_info</span> = <span class="ruby-node">%x`codesign -vv -d #{app_path.shellescape} 2&gt;&amp;1`</span>
  <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;Unable to verify code signing&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$?</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>

  <span class="ruby-identifier">values</span> = {}

  <span class="ruby-identifier">parts</span> = <span class="ruby-identifier">cert_info</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/\r?\n/</span>)
  <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">part</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">part</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\AAuthority=i(Phone|OS)/</span>
      <span class="ruby-identifier">type</span> = <span class="ruby-identifier">part</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;=&#39;</span>)[<span class="ruby-value">1</span>].<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;:&#39;</span>)[<span class="ruby-value">0</span>]
      <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;provisioning_type&#39;</span>] = <span class="ruby-identifier">type</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/distribution/i</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;distribution&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;development&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">part</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot;Authority&quot;</span>)
      <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;authority&#39;</span>] <span class="ruby-operator">||=</span> []
      <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;authority&#39;</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">part</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;=&#39;</span>)[<span class="ruby-value">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">part</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot;TeamIdentifier&quot;</span>)
      <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;team_identifier&#39;</span>] = <span class="ruby-identifier">part</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;=&#39;</span>)[<span class="ruby-value">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">part</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot;Identifier&quot;</span>)
      <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;bundle_identifier&#39;</span>] = <span class="ruby-identifier">part</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;=&#39;</span>)[<span class="ruby-value">1</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">values</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-is_supported-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_supported?</span><span
            class="method-args">(platform)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="is_supported-3F-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 184</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">is_supported?</span>(<span class="ruby-identifier">platform</span>)
  <span class="ruby-identifier">platform</span> <span class="ruby-operator">==</span> <span class="ruby-value">:ios</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-output" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">output</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="output-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 174</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">output</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-print_values" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">print_values</span><span
            class="method-args">(values)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="print_values-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 91</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">print_values</span>(<span class="ruby-identifier">values</span>)
  <span class="ruby-constant">FastlaneCore</span><span class="ruby-operator">::</span><span class="ruby-constant">PrintTable</span>.<span class="ruby-identifier">print_values</span>(<span class="ruby-identifier">config</span><span class="ruby-operator">:</span> <span class="ruby-identifier">values</span>,
                                       <span class="ruby-identifier">title</span><span class="ruby-operator">:</span> <span class="ruby-node">&quot;Summary for verify_build #{Fastlane::VERSION}&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-return_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">return_value</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="return_value-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 177</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">return_value</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-run" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run</span><span
            class="method-args">(params)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="run-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 9</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">mktmpdir</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">app_path</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">app_path</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">dir</span>)

    <span class="ruby-identifier">values</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">gather_cert_info</span>(<span class="ruby-identifier">app_path</span>)

    <span class="ruby-identifier">values</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">update_with_profile_info</span>(<span class="ruby-identifier">app_path</span>, <span class="ruby-identifier">values</span>)

    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">print_values</span>(<span class="ruby-identifier">values</span>)

    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">evaulate</span>(<span class="ruby-identifier">params</span>, <span class="ruby-identifier">values</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-update_with_profile_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_with_profile_info</span><span
            class="method-args">(app_path, values)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="update_with_profile_info-source">
            <pre><span class="ruby-comment"># File fastlane/lib/fastlane/actions/verify_build.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">update_with_profile_info</span>(<span class="ruby-identifier">app_path</span>, <span class="ruby-identifier">values</span>)
  <span class="ruby-identifier">profile</span> = <span class="ruby-node">%x`cat #{app_path.shellescape}/embedded.mobileprovision | security cms -D`</span>
  <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;Unable to extract profile&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$?</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>

  <span class="ruby-identifier">plist</span> = <span class="ruby-constant">Plist</span>.<span class="ruby-identifier">parse_xml</span>(<span class="ruby-identifier">profile</span>)

  <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;app_name&#39;</span>] = <span class="ruby-identifier">plist</span>[<span class="ruby-string">&#39;AppIDName&#39;</span>]
  <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;provisioning_uuid&#39;</span>] = <span class="ruby-identifier">plist</span>[<span class="ruby-string">&#39;UUID&#39;</span>]
  <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;team_name&#39;</span>] = <span class="ruby-identifier">plist</span>[<span class="ruby-string">&#39;TeamName&#39;</span>]
  <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;team_identifier&#39;</span>] = <span class="ruby-identifier">plist</span>[<span class="ruby-string">&#39;TeamIdentifier&#39;</span>].<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">application_identifier_prefix</span> = <span class="ruby-identifier">plist</span>[<span class="ruby-string">&#39;ApplicationIdentifierPrefix&#39;</span>][<span class="ruby-value">0</span>]
  <span class="ruby-identifier">full_bundle_identifier</span> = <span class="ruby-node">&quot;#{application_identifier_prefix}.#{values[&#39;bundle_identifier&#39;]}&quot;</span>

  <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-node">&quot;Inconsistent identifier found; #{plist[&#39;Entitlements&#39;][&#39;application-identifier&#39;]}, found in the embedded.mobileprovision file, should match #{full_bundle_identifier}, which is embedded in the codesign identity&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">plist</span>[<span class="ruby-string">&#39;Entitlements&#39;</span>][<span class="ruby-string">&#39;application-identifier&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">full_bundle_identifier</span>
  <span class="ruby-constant">UI</span>.<span class="ruby-identifier">user_error!</span>(<span class="ruby-string">&quot;Inconsistent identifier found&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">plist</span>[<span class="ruby-string">&#39;Entitlements&#39;</span>][<span class="ruby-string">&#39;com.apple.developer.team-identifier&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">values</span>[<span class="ruby-string">&#39;team_identifier&#39;</span>]

  <span class="ruby-identifier">values</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

